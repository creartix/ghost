{{!--
Re-usable card for linking to posts
--}}

<article class="group/article flex items-start gap-4 @xl:gap-0 @xl:flex-col {{post_class}}">

  {{#if feature_image}}
    <a class="w-1/3 block relative aspect-article shrink-0 rounded-3xl overflow-hidden group-hover/article:-translate-y-1.5 transition ease duration-400 @xl:mb-4 @xl:w-full" href="{{url}}">

      {{#if visibility}}
        {{#match visibility "!=" "public"}}
          <span class="hidden sm:inline-block absolute bottom-3 left-3 z-10 px-3.5 py-2.5 rounded-full text-xs font-semibold bg-emerald-700 text-white backdrop-blur-sm">
            {{#match visibility "members"}}Nur f√ºr Mitglieder{{/match}}
            {{#match visibility "paid"}}Premium{{/match}}
          </span>
        {{/match}}
      {{/if}}

      <picture class="w-full h-full object-cover">
        <source srcset="
          {{img_url feature_image size="xxs" format="avif" }} 30w,
          {{img_url feature_image size="xs" format="avif" }} 100w,
          {{img_url feature_image size="s" format="avif" }} 300w,
          {{img_url feature_image size="m" format="avif" }} 600w,
          {{img_url feature_image size="l" format="avif" }} 1200w,
          {{img_url feature_image size="xl" format="avif" }} 2000w"
          {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px" {{/if}}
          type="image/avif"
          {{^if @first}}loading="lazy"{{/if}}
        >
        <source srcset="
          {{img_url feature_image size="xxs" format="webp" }} 30w,
          {{img_url feature_image size="xs" format="webp" }} 100w,
          {{img_url feature_image size="s" format="webp" }} 300w,
          {{img_url feature_image size="m" format="webp" }} 600w,
          {{img_url feature_image size="l" format="webp" }} 1200w,
          {{img_url feature_image size="xl" format="webp" }} 2000w"
          {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px" {{/if}}
          type="image/webp"
          {{^if @first}}loading="lazy"{{/if}}
        >
        <img
          class="w-full h-full object-cover"
          srcset="
            {{img_url feature_image size="xxs"}} 30w,
            {{img_url feature_image size="xs" }} 100w,
            {{img_url feature_image size="s" }} 300w,
            {{img_url feature_image size="m" }} 600w,
            {{img_url feature_image size="l" }} 1200w,
            {{img_url feature_image size="xl" }} 2000w"
            {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px" {{/if}}
            src="{{img_url feature_image size="m"}}"
            alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}}{{/if}}"
            {{^if @first}}loading="lazy"{{/if}}
          >
      </picture>
    </a>
  {{/if}}

  <div class="@xl:pr-6 space-y-2">

    {{#if tags}}
      <div class="flex flex-wrap gap-2">
        {{#foreach tags limit="3"}}
          <a href="{{url}}" class="text-xs px-3 py-1 rounded-full bg-neutral-100 text-neutral-600 hover:bg-neutral-200 hover:text-neutral-800 transition ease duration-300 dark:bg-neutral-600 dark:text-neutral-100">{{name}}</a>
        {{/foreach}}
      </div>
    {{/if}}

    <a href="{{url}}" class="block font-headline font-semibold text-black text-xl hover:underline hover:underline-offset-4 @lg:text-xl @xl:text-3xl dark:text-white">
      <h3>{{title}}</h3>
    </a>

    <p class="line-clamp-3 @xl:line-clamp-none">{{excerpt}}</p>

    <div class="text-sm dark:text-neutral-500">
      <time datetime="{{date format=" DD.MM.YYYY"}}">
        {{date format="D MMM YYYY"}}
      </time>
      <span class="bull">&bull;</span>
      {{reading_time}}
    </div>

  </div>

</article>